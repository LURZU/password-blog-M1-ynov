language: php
php:
  - '8.2' # Utilisez la version PHP appropri√©e

before_script:
  - cp .env.travis .env || true # Copie si .env.travis existe, sinon continue
  - sed -i 's/DB_CONNECTION=mysql/DB_CONNECTION=sqlite/g' .env
  - sed -i 's/DB_DATABASE=homestead/DB_DATABASE=:memory:/g' .env
  - composer self-update
  - composer install --no-interaction
  - php artisan key:generate

script:
  - php artisan migrate
  - vendor/bin/phpunit --coverage-text --coverage-clover build/logs/clover.xml

after_success:
  - travis_retry php vendor/bin/coveralls
